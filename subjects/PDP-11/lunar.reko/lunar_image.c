// lunar_image.c
// Generated by decompiling lunar.lda
// using Reko decompiler version 0.11.5.0.

#include "lunar.h"

word16 g_w0004 = 0x0200; // 0004
word16 g_w0006 = 0xE0; // 0006
Eq_n g_t0044 = // 0044
	{
		L'\0'
	};
int16 g_w0046 = 0; // 0046
Eq_n g_t0048 = // 0048
	{
		L'\0'
	};
Eq_n g_t004A = // 004A
	{
		L'\0'
	};
Eq_n g_t004C = // 004C
	{
		L'\0'
	};
Eq_n g_t004E = // 004E
	{
		L'\0'
	};
Eq_n g_t0050 = // 0050
	{
		L'\0'
	};
Eq_n g_t0052 = // 0052
	{
		L'\0'
	};
int16 g_w0054 = 0; // 0054
Eq_n g_t0056 = // 0056
	{
		L'\0'
	};
Eq_n g_t0058 = // 0058
	{
		L'\0'
	};
Eq_n g_t005A = // 005A
	{
		L'\0'
	};
word16 g_w005C = 0x00; // 005C
word16 g_w005E = 0x00; // 005E
Eq_n g_t0060 = // 0060
	{
		L'\0'
	};
Eq_n g_t0062 = // 0062
	{
		L'\0'
	};
Eq_n g_t0064 = // 0064
	{
		L'\0'
	};
Eq_n g_t0066 = // 0066
	{
		L'\0'
	};
Eq_n g_t0068 = // 0068
	{
		L'\0'
	};
word16 g_w006A = 0x00; // 006A
Eq_n g_t006C = // 006C
	{
		L'\0'
	};
Eq_n g_t006E = // 006E
	{
		L'\0'
	};
cu16 g_w0070 = 0x00; // 0070
int16 g_w0072 = 0; // 0072
cui16 g_w0074 = 0x00; // 0074
int16 g_w0078 = 0; // 0078
word16 g_w007A = 0x00; // 007A
ci16 g_w007E = 0x00; // 007E
word16 g_w0080 = 0x00; // 0080
Eq_n g_t0082 = // 0082
	{
		L'\0'
	};
word16 g_w0084 = 0x00; // 0084
Eq_n g_t0086 = // 0086
	{
		L'\0'
	};
cui16 g_w008A = 0x00; // 008A
cui16 g_w008C = 0x00; // 008C
cui16 g_w008E = 0x00; // 008E
cui16 g_w0090 = 0x00; // 0090
Eq_n g_t0092 = // 0092
	{
		0x00
	};
word16 g_w009E = 0x9E; // 009E
ci16 g_w00A0 = 0x00; // 00A0
ci16 g_w00A2 = 0x00; // 00A2
ci16 g_w00A4 = 0x00; // 00A4
cui16 g_w00A6 = 0x00; // 00A6
cui16 g_w00A8 = 0x00; // 00A8
wchar_t g_w00AA = L'\0'; // 00AA
int16 g_w00AC = 0; // 00AC
ci16 g_w00AE = 0x00; // 00AE
cui16 g_w00B0 = 0xB0; // 00B0
// 0128: void fn0128()
// Called from:
//      fn0B06
//      fn13AA
void fn0128()
{
	__wait();
	Eq_n r0_n;
	r0_n.u0 = g_t006C.u0;
	if (r0_n != 0x00)
	{
		g_t006C.u0 = 0x00;
		g_t006E.u0 = (wchar_t) r0_n;
		fn053A();
	}
}

word16 * g_a013E[] = // 013E
	{
	};
// 0242: void fn0242(Register word16 r0, Register Eq_n r1)
// Called from:
//      fn03CE
//      fn053A
//      fn0856
//      fn103C
void fn0242(word16 r0, Eq_n r1)
{
	Eq_n r3_n;
	g_w0080 = 0x00;
	g_t0082.u0 = 0x00;
	g_t0086.u0 = 0x7FFF;
	word16 r4_n = r0;
	Eq_n r5_n = r1;
	while (true)
	{
		cui16 wLoc02_n = 0x00;
		word16 r2_n = fn02C8(r4_n + 0x02, out r3_n, out r4_n);
		ci16 r2_n = r2_n - g_w0080;
		if (r2_n <= 0x00)
		{
			r2_n = -r2_n;
			wLoc02_n = 0x2000;
		}
		cu16 r2_n = __swab(r2_n & 0x3F);
		g_w0080 = r2_n;
		ci16 r3_n = r3_n - g_t0082.u0;
		if (r3_n <= 0x00)
		{
			r3_n = -r3_n;
			wLoc02_n |= 0x40;
		}
		g_t0082.u0 = (wchar_t) r3_n;
		cui16 r3_n = r3_n & 0x3F;
		if (r3_n < g_t0086.u0)
			g_t0086.u0 = (wchar_t) r3_n;
		*r5_n.u2 = r3_n | r2_n >> 0x01 | wLoc02_n;
		r5_n.u2 = (word16) r5_n + 2;
	}
}

// 02C8: Register word16 fn02C8(Register (ptr16 Eq_n) r4, Register out Eq_n r3Out, Register out ptr16 r4Out)
// Called from:
//      fn0242
word16 fn02C8(struct Eq_n * r4, union Eq_n & r3Out, ptr16 & r4Out)
{
	word16 r2_n;
	fn125E((int16) r4->b0000, g_t004A.u0, out r2_n);
	word16 r2_n;
	fn125E((int16) r4->b0001, g_t004C.u0, out r2_n);
	word16 r2_n;
	fn125E((int16) r4->b0000, g_t004C.u0, out r2_n);
	word16 r2_n;
	fn125E((int16) r4->b0001, g_t004A.u0, out r2_n);
	r3Out = r2_n - r2_n;
	r4Out = &r4->b0001 + 1;
	return r2_n + r2_n;
}

// 0300: void fn0300(Register Eq_n r4)
// Called from:
//      fn053A
void fn0300(Eq_n r4)
{
	if (g_t0068.u0 == 0x00)
	{
		g_w25C0 = 0xF700;
		g_t0066.u0 = 0x00;
		g_w006A = 14300;
		g_w006A += g_t0068.u0;
		g_t004E.u0 = 0x00;
		g_t0050.u0 = 0x00;
		g_t0052.u0 = 62866;
	}
	else
	{
		ui32 r2_r3_n;
		fn114A(g_t0064.u0, 10500, out r2_r3_n);
		Eq_n r3_n;
		r3_n.u0 = <invalid>;
		Eq_n r2_n;
		r2_n.u0 = <invalid>;
		Eq_n r3_n;
		fn126C(100, r2_n, r3_n, out r3_n);
		g_t0066.u0 = (wchar_t) r3_n;
		ui32 r2_r3_n;
		fn114A(g_t006E.u0, r3_n, out r2_r3_n);
		Eq_n r3_n;
		r3_n.u0 = <invalid>;
		Eq_n r2_n;
		r2_n.u0 = <invalid>;
		word16 r3_n;
		fn126C(1500, r2_n, r3_n, out r3_n);
		ci16 r3_n = r3_n - g_t0068.u0;
		Eq_n r3_n;
		if (r3_n >= 0x00)
		{
			g_w25C0 = 0xF700;
			r3_n.u0 = 0x00;
		}
		else
		{
			r3_n = -r3_n;
			if (g_w25C0 != 0x00 && r3_n < 2000)
			{
				g_w25C0 = 0x00;
				*(word16 *) 62466 = *(word16 *) 62466;
			}
		}
		g_t0068.u0 = (wchar_t) r3_n;
		word16 r3_n;
		fn126C(0x0A, 0x00, r3_n, out r3_n);
		g_w006A = r3_n + 14300;
		ui32 r2_r3_n;
		fn114A(g_t0066.u0, 0x3ED7, out r2_r3_n);
		Eq_n r3_n;
		r3_n.u0 = <invalid>;
		Eq_n r2_n;
		r2_n.u0 = <invalid>;
		Eq_n r3_n;
		fn126C(r4, r2_n, r3_n, out r3_n);
		g_t004E.u0 = (wchar_t) r3_n;
		Eq_n r2_n;
		fn125E(r3_n, g_t004A.u0, out r2_n);
		g_t0050.u0 = (wchar_t) r2_n;
		word16 r2_n;
		fn125E(g_t004E.u0, g_t004C.u0, out r2_n);
		g_t0052.u0 = (wchar_t) (r2_n - 0x0A6E);
	}
}

// 03CE: void fn03CE(Register Eq_n r0)
// Called from:
//      fn053A
void fn03CE(Eq_n r0)
{
	int16 r2_n = (int16) (g_t0064.u0 >> 3).u1->b2766;
	++g_w008A;
	int16 r2_n = r2_n + (int16) ((g_w008A & 0x1F).u1)->b2773;
	g_w008C += r2_n;
	ci16 r4_n;
	struct Eq_n * r5_n = (struct Eq_n *) g_a27B0;
	Eq_n r3_n = (g_w008C & 0x03) + 10131;
	for (r4_n = 0x0C; r4_n > 0x00; --r4_n)
	{
		r5_n->b0000 = *r3_n.u1;
		byte * r5_n = (byte *) (&r5_n->b0000 + 1);
		*r5_n = (byte) r2_n;
		r3_n.u1 = (word16) r3_n + 1;
		r5_n = (struct Eq_n *) (r5_n + 7);
	}
	++g_w0090;
	g_w0090 &= 0x03;
	g_w008E += 0x0180;
	g_w008E &= 0x0380;
	g_w27A8 = 0x8C54;
	g_w27A8 |= g_w0090;
	g_w27A8 |= g_w008E;
	fn0242(0x27A2, r0);
}

// 0444: void fn0444()
// Called from:
//      fn053A
//      fn0856
//      fn0E98
//      fn103C
void fn0444()
{
	int16 r0_n = g_w0046;
	if (r0_n <= 0x00)
	{
		while (r0_n <= 65356)
		{
			r0_n += 0x0168;
			if (r0_n > 0x00)
				break;
		}
	}
	else
	{
		while (r0_n > 0xB4)
		{
			r0_n -= 0x0168;
			if (r0_n >= 0x00)
				break;
		}
	}
	g_w0046 = r0_n;
	if (r0_n <= 0x00)
		r0_n += 0x0168;
	g_t004A.u0 = (&g_a31DC->u0)[r0_n];
	Eq_n r0_n = r0_n << 1;
	if (r0_n >= 0x021C)
		r0_n -= 0x02D0;
	g_t004C.u0 = r0_n.u1->t3290.u0;
}

// 0488: void fn0488()
// Called from:
//      fn053A
void fn0488()
{
	word16 r3_n;
	word16 r3_n;
	Eq_n r1_n;
	r1_n.u0 = g_t0050.u0;
	if (r1_n <= 0x00)
		r1_n = -r1_n;
	ui32 r2_r3_n;
	fn114A(g_t006E.u0, r1_n, out r2_r3_n);
	Eq_n r3_n;
	r3_n.u0 = <invalid>;
	Eq_n r2_n;
	r2_n.u0 = <invalid>;
	ci16 r3_n;
	fn126C(3000, r2_n, r3_n, out r3_n);
	if (g_t0050.u0 <= 0x00)
		r3_n = -r3_n;
	Eq_n r3_n = (r3_n >> 1) + g_w0054;
	g_w0054 += r3_n;
	Eq_n r1_n = r3_n;
	if (r3_n <= 0x00)
		r1_n = -r3_n;
	ui32 r2_r3_n;
	fn114A(g_t006E.u0, r1_n, out r2_r3_n);
	uint32 r2_r3_n = r2_r3_n + (uint32) g_t0056.u0;
	Eq_n r2_n = fn126C(600, SLICE(r2_r3_n, word16, 16), (word16) r2_r3_n, out r3_n);
	if (r3_n <= 0x00)
		r3_n = -r3_n;
	g_w005C += r3_n;
	g_t0056.u0 = (wchar_t) r2_n;
	Eq_n r1_n;
	r1_n.u0 = g_t0052.u0;
	if (r1_n <= 0x00)
		r1_n = -r1_n;
	ui32 r2_r3_n;
	fn114A(g_t006E.u0, r1_n, out r2_r3_n);
	Eq_n r3_n;
	r3_n.u0 = <invalid>;
	Eq_n r2_n;
	r2_n.u0 = <invalid>;
	ci16 r3_n;
	fn126C(3000, r2_n, r3_n, out r3_n);
	if (g_t0052.u0 <= 0x00)
		r3_n = -r3_n;
	Eq_n r3_n = (r3_n >> 1) + g_t0058.u0;
	g_t0058.u0 = (wchar_t) (g_t0058.u0 + r3_n);
	Eq_n r1_n = r3_n;
	if (r3_n <= 0x00)
		r1_n = -r3_n;
	ui32 r2_r3_n;
	fn114A(g_t006E.u0, r1_n, out r2_r3_n);
	uint32 r2_r3_n = r2_r3_n + (uint32) g_t005A.u0;
	Eq_n r2_n = fn126C(600, SLICE(r2_r3_n, word16, 16), (word16) r2_r3_n, out r3_n);
	if (r3_n <= 0x00)
		r3_n = -r3_n;
	g_w005E += r3_n;
	g_t005A.u0 = (wchar_t) r2_n;
}

// 053A: void fn053A()
// Called from:
//      fn0128
void fn053A()
{
	word16 r3_n;
	g_w0084 = ~0x3F;
	Eq_n r5_n;
	r5_n.u0 = g_t0044.u0;
	g_t0044.u0 = 0x00;
	Eq_n r0_n;
	r0_n.u0 = g_t006E.u0;
	Eq_n r1_n = r5_n;
	if (r5_n <= 0x00)
		r1_n = -r5_n;
	ui32 r2_r3_n;
	fn114A(r0_n, r1_n, out r2_r3_n);
	uint32 r2_r3_n = r2_r3_n + (uint32) g_t0048.u0;
	Eq_n r2_n = fn126C(0x3C, SLICE(r2_r3_n, word16, 16), (word16) r2_r3_n, out r3_n);
	if (r5_n <= 0x00)
		r3_n = -r3_n;
	g_w0046 += r3_n;
	g_t0048.u0 = (wchar_t) r2_n;
	fn0444();
	g_t0092.u0 = (cui16) (g_t0092.u0 + 0x02);
	fn0242(9944, (g_t0092.u0 & 0x02).u1->t34AC.u0);
}

// 0790: void fn0790()
// Called from:
//      fn053A
//      fn0856
void fn0790()
{
}

word16 g_w07BA = 0x00; // 07BA
// 0856: void fn0856(Register Eq_n r4)
// Called from:
//      fn053A
void fn0856(Eq_n r4)
{
l0856:
	fn1578();
	ci16 r5_n = g_w007E;
	if (r5_n >= 0x00)
	{
		if (r5_n > 0x03)
		{
			r4.u0 = g_t0058.u0;
			if (r4 >= 64936)
			{
				if (r4 >= 65236)
				{
					if (r4 >= ~0x95)
					{
						if (g_w34CA == 8458)
							g_w34CA = 0x00;
					}
					else
						g_w34CA = 8458;
				}
				else
					g_w34CA = 8408;
			}
			else
				g_w34CA = 0x20AC;
l0888:
			int16 r0_n = g_w0078;
			fn0CCA(r0_n);
			switch (r0_n)
			{
			case 0:
				fn0790();
				return;
			case 1:
				if (r5_n > 0x1A)
				{
					fn0790();
					return;
				}
				ci16 v68_n = r4 - 64936;
				if (v68_n <= 0x00)
				{
					if (v68_n <= 0x00)
						goto l0904;
					g_w34CA = 0x23FE;
					fn0E32();
					goto l0856;
				}
				else
				{
					g_w34CA = 0x237E;
					word16 wLoc02_n = 0x03;
					if (g_w0054 >= 0x00)
						wLoc02_n = 0x04;
					fn0C90(r0_n, (byte) wLoc02_n);
					g_w34B6 -= 0x10;
					fn0F04(r0_n);
				}
			}
		}
	}
	else if (r5_n <= ~0x09)
		goto l0904;
	g_t0060.u0 = 0x00;
	g_w25AA = 0x01C2;
	g_w34C2 = 0x00;
	g_w34D2 = 0x00;
	if (r5_n != 0x00 && r5_n > 0x00)
		goto l0888;
	Eq_n r4_n;
	r4_n.u0 = g_t0058.u0;
	if (r4_n > 64936)
	{
		word16 r0_n;
		if (r4_n > 65236)
		{
			if (r4_n > ~0x95)
			{
				if (r4_n > ~0x4F)
					r0_n = 0x214E;
				else
					r0_n = 8566;
			}
			else
				r0_n = 0x21A4;
		}
		else
			r0_n = 0x21CE;
		g_w34C2 = 0x00;
		g_w34CA = r0_n;
		int16 r0_n;
		word16 r1_n;
		if (g_w0054 > 100 || g_w0054 < ~0x63)
		{
l0964:
			r0_n = g_w0054;
			r1_n = 0x22C6;
			goto l097C;
		}
		else
		{
			if (g_w0046 >= ~0x0E && g_w0046 <= 0x0F)
			{
				int16 r1_n = g_w0078;
				r0_n = g_a28F2[r1_n] - (&g_w28F0)[r1_n];
				int16 r2_n = r0_n;
				if (r0_n <= 0x00)
					r2_n = -r0_n;
				if (r2_n < 0x30)
				{
					int16 r3;
					word16 * r5;
					fn0B06(r3, r4_n, r5);
					goto l0964;
				}
				r1_n = 8980;
			}
			else
			{
				r0_n = g_w0046;
				r1_n = 0x2258;
			}
l097C:
			g_w34C2 = r1_n;
			int16 r1_n = g_w0078;
			word16 wLoc02_n = 0x03;
			if (r0_n >= 0x00)
				wLoc02_n = 0x04;
			fn0C90(r1_n, (byte) wLoc02_n);
			ui16 r2_n = g_a28F2[r1_n] - (&g_w28F0)[r1_n];
			ci16 r2_n = r2_n - (r2_n * 0x03 >> 2);
			Eq_n sp_n;
			sp_n.u0 = <invalid>;
			ci16 r2_n = r2_n + (r2_n >> 1);
			if (r2_n <= 0x00)
			{
				if (r2_n < ~0x2C)
					r2_n = ~0x2C;
			}
			else if (r2_n > 0x2D)
				r2_n = 0x2D;
			int16 r3_n = 0x5A;
			if (r0_n <= 0x00)
				r3_n = -90;
			g_w0046 = r2_n + r3_n;
			Eq_n r1_n = g_t0092.u0 + 0x02 & 0x02;
			g_t0092.u0 = (cui16) r1_n;
			Eq_n r1_n;
			r1_n.u0 = r1_n.u1->t34AC.u0;
			sp_n.u3->tFFFFFFFE.u0 = (wchar_t) r1_n;
			fn0444();
			fn0242(9944, r1_n);
		}
	}
l0904:
	g_w34CA = 0x2212;
	fn0F04(fn0E06(0x20));
}

// 0A0A: void fn0A0A()
// Called from:
//      fn053A
void fn0A0A()
{
	if (g_w007E >= 0x96)
		g_w34D2 = 0x00;
	else
	{
		Eq_n r4_n;
		r4_n.u0 = g_t0064.u0;
		bool C_n = (bool) cond(r4_n - 0x3F);
		if (r4_n > 0x3F)
			r4_n.u0 = 0x3F;
		Eq_n r4_n = __rcl<word16,byte>(r4_n, 0x01, C_n);
		Eq_n r4_n = __rcl<word16,byte>(r4_n, 0x01, (r4_n & 0x8000) != 0x00);
		g_w35CA = __rcl<word16,byte>(__rcl<word16,byte>(r4_n, 0x01, (r4_n & 0x8000) != 0x00), 0x01, (r4_n & 0x8000) != 0x00) & 0x0380 | 0x9C50;
		if (g_w0046 > 0x2D)
			g_w34D2 = 0x00;
		else if (g_w0046 < ~0x2C)
			g_w34D2 = 0x00;
		else
		{
			Eq_n r1_n;
			r1_n.u0 = g_t004A.u0;
			if (r1_n <= 0x00)
				r1_n = -r1_n;
			Eq_n r0_n = g_w34B6 - g_w007A;
			ui32 r2_r3_n;
			fn114A(r0_n, r1_n, out r2_r3_n);
			Eq_n r3_n;
			r3_n.u0 = <invalid>;
			Eq_n r2_n;
			r2_n.u0 = <invalid>;
			word16 r3_n;
			fn126C(g_t004C.u0, r2_n, r3_n, out r3_n);
			ci16 r4_n = (word16) r0_n + r3_n;
			if (g_t004A.u0 >= 0x00)
				r3_n = -r3_n;
			g_w35CC = r3_n + g_w34B4;
			g_w35CE = g_w007A;
			g_w35D0 = 0xB000;
			if (r4_n > 0x96)
				g_w34D2 = 0x00;
			else
			{
				Eq_n r4_n = 0x96 - r4_n;
				ui32 r2_r3_n;
				fn114A(r4_n, g_t0064.u0, out r2_r3_n);
				Eq_n r3_n;
				r3_n.u0 = <invalid>;
				fn0A94(r3_n >> 3, r4_n, &g_w35D2);
			}
		}
	}
}

// 0A94: void fn0A94(Register int16 r3, Register Eq_n r4, Register (ptr16 word16) r5)
// Called from:
//      fn0A0A
//      fn0B06
void fn0A94(int16 r3, Eq_n r4, word16 * r5)
{
	if (r3 >> 1 == 0x00)
		g_w34D2 = 0x00;
	else
	{
		int16 wLoc02_n = r3 >> 1;
		if (r3 >> 1 > 600)
			wLoc02_n = 600;
		cui16 r2_n = g_w00B0;
		cui16 r2_n;
		struct Eq_n * r5_n;
		int16 v26_n;
		do
		{
			Eq_n r2_n = r2_n + g_w0070 + 0x01 & 0x3F;
			r2_n = (word16) r2_n + g_t0052.u0;
			r4 = ~r4 & 0x2000 | 0x4000;
			cui16 r0_n = __swab((int16) r2_n.u1->b2766 & 0x3F) >> 0x01 | r4 | (int16) ((r2_n & 0x3F).u1)->b2766 & 0x3F;
			*r5 = r0_n;
			r5_n = (struct Eq_n *) (r5 + 1);
			r5_n->w0000 = r0_n + 0x2040 & 0x3FFF;
			v26_n = wLoc02_n - 0x01;
			r2_n = r2_n & 0x3F;
			r5 = &r5_n->w0002;
			wLoc02_n = v26_n;
		} while (v26_n > 0x00);
		r5_n->w0002 = 0xF700;
		r5_n->w0004 = 0x00;
		g_w00B0 = r2_n & 0x3F;
		fn0AF6();
	}
}

// 0AF6: void fn0AF6()
// Called from:
//      fn0A94
//      fn0B06
void fn0AF6()
{
	g_w34D2 = 13770;
}

// 0B06: void fn0B06(Register int16 r3, Register Eq_n r4, Register (ptr16 word16) r5)
// Called from:
//      fn0856
void fn0B06(int16 r3, Eq_n r4, word16 * r5)
{
	ptr16 fp;
	// Failed to bind call argument.
	// Please report this issue at https://github.com/uxmal/reko
	Eq_n stackArg0;
	stackArg0.u0 = <invalid>;
	fn13AA(stackArg0);
	2828 = 0x0B0B;
	if (2828 != 0x00)
	{
		fn0A94(r3, r4, r5);
		return;
	}
	g_w267A = g_w34B4;
	g_w267C = g_w34B6;
	g_w34D2 = 9848;
	ptr16 sp_n = fp;
	cu16 v12_n;
	do
	{
		v12_n = g_w0070 & 0x7F;
		g_w0070 = v12_n;
	} while (v12_n != 0x00);
	if (g_w07BA != 0x00)
	{
		Eq_n r3_n = g_w2610 - g_w34B4;
		word16 r2_n = g_w2612 - g_w267C;
		if (r2_n == ~0x02)
			fn0C36(0x00, g_w2610 - g_w267A + 0x19);
		else
			fn0C36(r2_n + 0x03, r3_n);
	}
l0BD0:
	struct Eq_n * sp_n = sp_n - 0x02;
	sp_n->t0000.u1 = 0x01;
	sp_n->wFFFFFFFE = g_w0078;
	fn0C90(sp_n->wFFFFFFFE, sp_n->t0000.u0);
	Eq_n sp_n;
	sp_n.u0 = <invalid>;
	Eq_n r3_n;
	r3_n.u0 = 0x30;
	if ((g_w0070 & 0x01) != 0x00)
		r3_n.u1 = -48;
	sp_n.u3->tFFFFFFFE.u0 = (wchar_t) r3_n;
	fn0C36(~0x17, r3_n);
}

// 0C36: void fn0C36(Register ci16 r2, Register Eq_n r3)
// Called from:
//      fn0B06
void fn0C36(ci16 r2, Eq_n r3)
{
	word16 r5_n = 0x0A80;
	if (r3 <= 0x00)
		r5_n = 0x0AC0;
	g_w0C72 = r5_n;
	fn0C72();
}

// 0C72: void fn0C72()
// Called from:
//      fn0B06
//      fn0C36
void fn0C72()
{
	__halt();
}

// 0C76: void fn0C76()
// Called from:
//      fn0C36
void fn0C76()
{
	cu16 v4_n;
	do
	{
		v4_n = g_w0070 & 0x07;
		g_w0070 = v4_n;
	} while (v4_n == 0x00);
	fn1578();
	cu16 v10_n;
	do
	{
		v10_n = g_w0070 & 0x07;
		g_w0070 = v10_n;
	} while (v10_n != 0x00);
	fn1578();
}

// 0C90: void fn0C90(Stack int16 wArg02, Stack Eq_n bArg04)
// Called from:
//      fn0856
//      fn0B06
//      fn0E06
void fn0C90(int16 wArg02, Eq_n bArg04)
{
	word16 wArg04;
	ui8 bArg04_n = (byte) wArg04;
	if (wArg02 >> 1 < 0x00)
	{
		(wArg02 >> 1).u1->b3013 = (wArg02 >> 1).u1->b3013 & 0x0F;
		bArg04_n = (byte) wArg04 << 0x04;
	}
	else
		(wArg02 >> 1).u1->b3013 = (wArg02 >> 1).u1->b3013 & 0xF0;
	(wArg02 >> 1).u1->b3013 = (wArg02 >> 1).u1->b3013 | bArg04_n;
}

// 0CCA: void fn0CCA(Stack int16 wArg02)
// Called from:
//      fn0856
void fn0CCA(int16 wArg02)
{
}

// 0CEC: void fn0CEC(Register int16 r0)
// Called from:
//      fn053A
void fn0CEC(int16 r0)
{
	<anonymous> * ptrLoc02;
	struct Eq_n * r5_n = fn0D3C(r0, ptrLoc02);
	Eq_n r4_n = (g_w28F0 >> 5) + 0x17;
	r5_n->t0000.u0 = (wchar_t) r4_n;
	g_t0082.u0 = (wchar_t) r4_n;
	r5_n->w0002 = 0x8C50;
	cui16 * r5_n = (cui16 *) (&r5_n->w0002 + 1);
	struct Eq_n * r0_n = (struct Eq_n *) &g_w28F0;
	while (true)
	{
		++r0_n;
		r5_n = fn0D78((r0_n->w0000 >> 5) + 0x17, r5_n);
	}
}

// 0D3C: Register word16 fn0D3C(Register int16 r0, Stack (ptr16 code) ptrArg00)
// Called from:
//      fn0CEC
//      fn0F04
word16 fn0D3C(int16 r0, <anonymous> * ptrArg00)
{
	g_w00A0 = 225;
	g_w34DA = 0x00;
	g_w07BA = 0x00;
	g_a182A[0] = 38996;
	g_w182C = 0xF0A0;
	g_w182E = 0x00;
	ptrArg00();
	return 0x1830;
}

// 0D66: void fn0D66()
void fn0D66()
{
}

// 0D78: Register (ptr16 cui16) fn0D78(Register Eq_n r4, Register (ptr16 cui16) r5)
// Called from:
//      fn0CEC
//      fn0F04
cui16 * fn0D78(Eq_n r4, cui16 * r5)
{
	cui16 wLoc02_n = 0x0200;
	if (r4 >= 0x0400)
	{
		r4.u0 = 0x03FF;
		if (g_t0082.u0 == 0x03FF)
			goto l0D9C;
	}
	if (r4 <= 0x00)
	{
		r4.u0 = 0x00;
		if (g_t0082.u0 == 0x00)
		{
l0D9C:
			ci16 v19_n = g_w00A2 - 0x01;
			g_w00A2 = v19_n;
			if (v19_n <= 0x00)
			{
				++g_w00A4;
				g_w00A4 &= 0x03;
				++g_w00A4;
				g_w00A2 = g_w00A4;
				g_w00A6 += 0x0280;
				g_w00A6 &= 0x0380;
				++g_w00A8;
				g_w00A8 &= 0x03;
				*r5 = g_w00A6;
				*r5 |= g_w00A8;
				*r5 |= 0x8C04;
				++r5;
			}
			wchar_t r4_n = r4 - g_t0082.u0;
			cui16 r4_n;
			if (r4_n <= 0x00)
			{
				wchar_t r4_n = -r4_n;
				g_t0082.u0 = (wchar_t) (g_t0082.u0 - (r4_n & 0x3F));
				r4_n = r4_n & 0x3F | 0x40;
			}
			else
			{
				g_t0082.u0 = (wchar_t) (g_t0082.u0 + (r4_n & 0x3F));
				r4_n = r4_n & 0x3F;
			}
			*r5 = r4_n | wLoc02_n;
			ci16 v44_n = g_w00A0 - 0x01;
			g_w00A0 = v44_n;
			cui16 * r5_n = r5 + 1;
			return r5_n;
		}
	}
	wLoc02_n = 0x4200;
	goto l0D9C;
}

// 0E06: Register int16 fn0E06(Register int16 r0)
// Called from:
//      fn053A
//      fn0856
int16 fn0E06(int16 r0)
{
	int16 r1_n = g_w0072;
	Eq_n r1_n = (r1_n << 1) + 0x28F0;
	word16 wLoc02_n = 0x03;
	Eq_n r1_n;
	r1_n.u1 = &r1_n.u1->w0002;
	Eq_n r3_n;
	r3_n.u1 = &r1_n.u1->w0002;
	if (r1_n.u1->w0000 >= (r1_n.u1)->w0002)
		wLoc02_n = 0x04;
	fn0C90(r1_n, (byte) wLoc02_n);
	do
	{
		*r1_n.u1 -= r0;
		r3_n -= 0x02;
		*r3_n.u1 -= r0;
		r1_n.u1 = (word16) r1_n + 2;
		r0 = -(r0 >> 1);
	} while (r0 != 0x00);
	return r0;
}

// 0E32: Register word16 fn0E32()
// Called from:
//      fn053A
//      fn0856
word16 fn0E32()
{
	g_w00AE = 0x00;
	g_w34C2 = 0x00;
	g_w34D2 = 0x00;
	*(word16 *) 62466 = *(word16 *) 62466;
	struct Eq_n * r5_n;
	do
	{
		g_w35CA = (__swab(g_w00AC + 0x01) >> 0x01) + g_w35CA & 0x0380 | 0x9C50;
		struct Eq_n * r5_n;
		fn0E98(&g_w35CC, out r5_n);
		*(word16 *) 62466 = *(word16 *) 62466;
		g_w00AE -= 0x0A;
		fn0E98(r5_n, out r5_n);
		r5_n->w0000 = 0xF700;
		r5_n->w0002 = 0x00;
		g_w34C2 = 13770;
		*(word16 *) 62466 = *(word16 *) 62466;
		g_w00AE += 33;
	} while (g_w00AE <= 0xC0);
	// Failed to bind call argument.
	// Please report this issue at https://github.com/uxmal/reko
	Eq_n stackArg0;
	stackArg0.u0 = <invalid>;
	fn13AA(stackArg0);
	__reset();
	word16 r5_n;
	return fn0E98(&r5_n->w0002, out r5_n);
}

// 0E98: Register cui16 fn0E98(Register (ptr16 Eq_n) r5, Register out (ptr16 Eq_n) r5Out)
// Called from:
//      fn0E32
cui16 fn0E98(struct Eq_n * r5, struct Eq_n & r5Out)
{
	ci16 wLoc08;
	g_w0046 = 65506;
	ci16 wLoc02_n = 0xF1;
	cui16 r0_n;
	ci16 v30_n;
	do
	{
		fn0444();
		int16 r0_n = (wLoc08 >> 1) + 0x01 + g_w0070 + g_w00AC;
		g_w00AC = r0_n;
		r0_n = r0_n & 0x1F;
		Eq_n r4_n = (int16) (r0_n & 0x1F).u1->b2773 + g_w00AE;
		if (r4_n >= 0x00)
		{
			word16 r2_n;
			r0_n = fn125E(r4_n, g_t004C.u0, out r2_n);
			ci16 r2_n = r2_n + g_w34B4;
			if (r2_n < 0x00)
				goto l0EFE;
			r5->w0000 = r2_n | 0x4000;
			word16 r2_n;
			r0_n = fn125E(r4_n, g_t004A.u0, out r2_n);
			struct Eq_n * r5_n = (struct Eq_n *) &r5->w0002;
			ci16 r2_n = r2_n + g_w34B6;
			if (r2_n >= 0x00)
			{
				r5_n->w0000 = r2_n;
				goto l0EF0;
			}
			r5_n->wFFFFFFFE = 0x00;
		}
l0EFE:
		r5->w0000 = 0x00;
		r5->w0002 = 0x00;
l0EF0:
		++g_w0046;
		v30_n = wLoc02_n - 0x01;
		++r5;
		wLoc02_n = v30_n;
	} while (v30_n > 0x00);
	r5Out = r5;
	return r0_n;
}

// 0F04: void fn0F04(Register int16 r0)
// Called from:
//      fn053A
//      fn0856
void fn0F04(int16 r0)
{
	<anonymous> * ptrLoc02;
	struct Eq_n * r5_n = fn0D3C(r0, ptrLoc02);
	g_w00AA = 0x00;
	Eq_n r0_n = (g_w0074 << 1) + 0x28F0;
	Eq_n sp_n;
	sp_n.u0 = <invalid>;
	Eq_n r4_n = fn100C(*r0_n.u2);
	if (r4_n <= 0x00)
		r4_n.u0 = 0x00;
	else if (r4_n >= 0x0400)
		r4_n.u0 = 0x03FF;
	r5_n->t0000.u0 = (wchar_t) r4_n;
	g_t0082.u0 = (wchar_t) r4_n;
	r5_n->w0002 = 0x8C50;
	cui16 * r5_n = (cui16 *) (&r5_n->w0002 + 1);
	while (true)
	{
		sp_n.u3->tFFFFFFFE.u0 = (wchar_t) r4_n;
		Eq_n r4_n = fn100C(*r0_n.u2);
		Eq_n v23_n;
		v23_n.u0 = sp_n.u3->tFFFFFFFE.u0;
		sp_n.u3->tFFFFFFFE.u0 = (word16) r0_n + 2;
		r4_n = v23_n;
		ci16 r1_n = r4_n - v23_n;
		wchar_t r3_n;
		if (r1_n <= 0x00)
		{
			word16 r3_n;
			fn126C(0x0C, 0x00, 0x06 - r1_n, out r3_n);
			r3_n = -r3_n;
		}
		else
			fn126C(0x0C, 0x00, r1_n + 0x06, out r3_n);
		ci16 r2_n;
		r0_n.u0 = sp_n.u3->tFFFFFFFE.u0;
		for (r2_n = 0x0C; r2_n > 0x00; --r2_n)
		{
			++g_w00AA;
			if (g_w00AA >= 0x03)
				g_w0F70 = 0x0ADF;
			else if (g_w00AA <= ~0x02)
				g_w0F70 = 0x0A9F;
			Eq_n r4_n = (word16) r4_n.u0 + g_w00AA + r3_n;
			sp_n.u3->tFFFFFFFE.u0 = (wchar_t) r4_n;
			r5_n = fn0D78(r4_n, r5_n);
			r4_n.u0 = sp_n.u3->tFFFFFFFE.u0;
		}
	}
}

word16 g_w0F70 = 0x0A9F; // 0F70
// 100C: Register int16 fn100C(Register int16 r4)
// Called from:
//      fn053A
//      fn0F04
//      fn103C
int16 fn100C(int16 r4)
{
	return (r4 * 0x03 >> 3) + 0x17;
}

// 103C: void fn103C(Register word16 r0, Register (ptr16 Eq_n) r3, Register (ptr16 Eq_n) r5, Stack (ptr16 Eq_n) wArg00)
void fn103C(word16 r0, struct Eq_n * r3, struct Eq_n * r5, struct Eq_n * wArg00)
{
	if (r5 > &g_t1F96)
		return;
	r5->w0000 = 0x9800;
	r5->w0002 = r0;
	ci16 r4_n = fn100C(r3->w0002) + fn100C(r3->w0000);
	g_w0046 = wArg00->w0000;
	int16 r4_n = (r4_n >> 1) + wArg00->w0002;
	g_w0084 = wArg00->w0004;
	r5->w0004 = r4_n;
	cup16 v32_n = r3->w0000 - r3->w0002;
	if (v32_n != 0x00)
	{
		if (v32_n <= 0x00)
			g_w0046 += ~0x15;
		else
			g_w0046 += 22;
	}
	fn0444();
	fn0242(9944, &r5->w0004 + 1);
}

// 114A: FlagGroup bool fn114A(Register Eq_n r0, Register Eq_n r1, Sequence out Eq_n r2_r3Out)
// Called from:
//      fn0300
//      fn0488
//      fn053A
//      fn0A0A
//      fn123A
bool fn114A(Eq_n r0, Eq_n r1, union Eq_n & r2_r3Out)
{
	cup16 v11_n = r1 - r0;
	bool C_n = (bool) cond(v11_n);
	Eq_n r2_n;
	if (v11_n < 0x00)
	{
		r2_n = r1;
		if (r1 == 0x00)
			goto l119E;
		r1 = r0;
		C_n = false;
	}
	else
	{
		r2_n = r0;
		if (r0 == 0x00)
			goto l119E;
	}
	Eq_n r2_n = __rcl<word16,byte>(r2_n, 0x01, C_n);
	bool C_n = (r2_n & 0x8000) != 0x00;
	uint32 r2_r3_n;
	uint32 r2_r3_n;
	uint32 r2_r3_n;
	uint32 r2_r3_n;
	uint32 r2_r3_n;
	uint32 r2_r3_n;
	uint32 r2_r3_n;
	uint32 r2_r3_n;
	uint32 r2_r3_n;
	uint32 r2_r3_n;
	uint32 r2_r3_n;
	uint32 r2_r3_n;
	uint32 r2_r3_n;
	uint32 r2_r3_n;
	if ((r2_n & 0x8000) == 0x00)
	{
		Eq_n r2_n = __rcl<word16,byte>(r2_n, 0x01, C_n);
		bool C_n = (r2_n & 0x8000) != 0x00;
		r2_r3_n = SEQ(r2_n, 0x00);
		if ((r2_n & 0x8000) == 0x00)
		{
			Eq_n r2_n = __rcl<word16,byte>(r2_n, 0x01, C_n);
			bool C_n = (r2_n & 0x8000) != 0x00;
			r2_r3_n = SEQ(r2_n, 0x00);
			if ((r2_n & 0x8000) == 0x00)
			{
				Eq_n r2_n = __rcl<word16,byte>(r2_n, 0x01, C_n);
				bool C_n = (r2_n & 0x8000) != 0x00;
				r2_r3_n = SEQ(r2_n, 0x00);
				if ((r2_n & 0x8000) == 0x00)
				{
					Eq_n r2_n = __rcl<word16,byte>(r2_n, 0x01, C_n);
					bool C_n = (r2_n & 0x8000) != 0x00;
					r2_r3_n = SEQ(r2_n, 0x00);
					if ((r2_n & 0x8000) == 0x00)
					{
						Eq_n r2_n = __rcl<word16,byte>(r2_n, 0x01, C_n);
						bool C_n = (r2_n & 0x8000) != 0x00;
						r2_r3_n = SEQ(r2_n, 0x00);
						if ((r2_n & 0x8000) == 0x00)
						{
							Eq_n r2_n = __rcl<word16,byte>(r2_n, 0x01, C_n);
							bool C_n = (r2_n & 0x8000) != 0x00;
							r2_r3_n = SEQ(r2_n, 0x00);
							if ((r2_n & 0x8000) == 0x00)
							{
								Eq_n r2_n = __rcl<word16,byte>(r2_n, 0x01, C_n);
								bool C_n = (r2_n & 0x8000) != 0x00;
								r2_r3_n = SEQ(r2_n, 0x00);
								if ((r2_n & 0x8000) == 0x00)
								{
									Eq_n r2_n = __rcl<word16,byte>(r2_n, 0x01, C_n);
									bool C_n = (r2_n & 0x8000) != 0x00;
									r2_r3_n = SEQ(r2_n, 0x00);
									if ((r2_n & 0x8000) == 0x00)
									{
										Eq_n r2_n = __rcl<word16,byte>(r2_n, 0x01, C_n);
										bool C_n = (r2_n & 0x8000) != 0x00;
										r2_r3_n = SEQ(r2_n, 0x00);
										if ((r2_n & 0x8000) == 0x00)
										{
											Eq_n r2_n = __rcl<word16,byte>(r2_n, 0x01, C_n);
											bool C_n = (r2_n & 0x8000) != 0x00;
											r2_r3_n = SEQ(r2_n, 0x00);
											if ((r2_n & 0x8000) == 0x00)
											{
												Eq_n r2_n = __rcl<word16,byte>(r2_n, 0x01, C_n);
												bool C_n = (r2_n & 0x8000) != 0x00;
												r2_r3_n = SEQ(r2_n, 0x00);
												if ((r2_n & 0x8000) == 0x00)
												{
													Eq_n r2_n = __rcl<word16,byte>(r2_n, 0x01, C_n);
													bool C_n = (r2_n & 0x8000) != 0x00;
													r2_r3_n = SEQ(r2_n, 0x00);
													if ((r2_n & 0x8000) == 0x00)
													{
														Eq_n r2_n = __rcl<word16,byte>(r2_n, 0x01, C_n);
														bool C_n = (r2_n & 0x8000) != 0x00;
														r2_r3_n = SEQ(r2_n, 0x00);
														if ((r2_n & 0x8000) == 0x00)
														{
															r2_r3_n = SEQ(__rcl<word16,byte>(r2_n, 0x01, C_n), 0x00);
															if ((r2_n & 0x8000) == 0x00)
															{
																C_n = false;
l119E:
																r2_r3Out.u0 = <invalid>;
																return C_n;
															}
															goto l122A;
														}
														goto l1220;
													}
													goto l1216;
												}
												goto l120C;
											}
											goto l1202;
										}
										goto l11F8;
									}
									goto l11EE;
								}
								goto l11E4;
							}
							goto l11DA;
						}
						goto l11D0;
					}
					goto l11C6;
				}
				goto l11BC;
			}
			goto l11B2;
		}
	}
	else
	{
		r2_r3_n = SEQ(r2_n, r1) << 0x01;
		if ((r2_n & 0x8000) == 0x00)
			goto l11AC;
	}
	r2_r3_n += (uint32) r1;
l11AC:
	r2_r3_n = r2_r3_n << 0x01;
	if ((SLICE(r2_r3_n, word16, 16) & 0x8000) == 0x00)
	{
l11B6:
		r2_r3_n = r2_r3_n << 0x01;
		if ((SLICE(r2_r3_n, word16, 16) & 0x8000) == 0x00)
		{
l11C0:
			r2_r3_n = r2_r3_n << 0x01;
			if ((SLICE(r2_r3_n, word16, 16) & 0x8000) == 0x00)
			{
l11CA:
				r2_r3_n = r2_r3_n << 0x01;
				if ((SLICE(r2_r3_n, word16, 16) & 0x8000) == 0x00)
				{
l11D4:
					r2_r3_n = r2_r3_n << 0x01;
					if ((SLICE(r2_r3_n, word16, 16) & 0x8000) == 0x00)
					{
l11DE:
						r2_r3_n = r2_r3_n << 0x01;
						if ((SLICE(r2_r3_n, word16, 16) & 0x8000) == 0x00)
						{
l11E8:
							r2_r3_n = r2_r3_n << 0x01;
							if ((SLICE(r2_r3_n, word16, 16) & 0x8000) == 0x00)
							{
l11F2:
								r2_r3_n = r2_r3_n << 0x01;
								if ((SLICE(r2_r3_n, word16, 16) & 0x8000) == 0x00)
								{
l11FC:
									r2_r3_n = r2_r3_n << 0x01;
									if ((SLICE(r2_r3_n, word16, 16) & 0x8000) == 0x00)
									{
l1206:
										r2_r3_n = r2_r3_n << 0x01;
										if ((SLICE(r2_r3_n, word16, 16) & 0x8000) == 0x00)
										{
l1210:
											r2_r3_n = r2_r3_n << 0x01;
											if ((SLICE(r2_r3_n, word16, 16) & 0x8000) == 0x00)
											{
l121A:
												r2_r3_n = r2_r3_n << 0x01;
												if ((SLICE(r2_r3_n, word16, 16) & 0x8000) == 0x00)
												{
l1224:
													r2_r3_n = r2_r3_n << 0x01;
													if ((SLICE(r2_r3_n, word16, 16) & 0x8000) == 0x00)
													{
l122E:
														cui16 r2_n = SLICE(r2_r3_n, word16, 16);
														ui32 v91_n = r2_r3_n << 0x01;
														bool C_n = (r2_n & 0x8000) != 0x00;
														if ((r2_n & 0x8000) != 0x00)
															C_n = (bool) cond(SLICE(v91_n + (uint32) r1, word16, 16));
														r2_r3Out.u0 = <invalid>;
														return C_n;
													}
l122A:
													r2_r3_n += (uint32) r1;
													goto l122E;
												}
l1220:
												r2_r3_n += (uint32) r1;
												goto l1224;
											}
l1216:
											r2_r3_n += (uint32) r1;
											goto l121A;
										}
l120C:
										r2_r3_n += (uint32) r1;
										goto l1210;
									}
l1202:
									r2_r3_n += (uint32) r1;
									goto l1206;
								}
l11F8:
								r2_r3_n += (uint32) r1;
								goto l11FC;
							}
l11EE:
							r2_r3_n += (uint32) r1;
							goto l11F2;
						}
l11E4:
						r2_r3_n += (uint32) r1;
						goto l11E8;
					}
l11DA:
					r2_r3_n += (uint32) r1;
					goto l11DE;
				}
l11D0:
				r2_r3_n += (uint32) r1;
				goto l11D4;
			}
l11C6:
			r2_r3_n += (uint32) r1;
			goto l11CA;
		}
l11BC:
		r2_r3_n += (uint32) r1;
		goto l11C0;
	}
l11B2:
	r2_r3_n += (uint32) r1;
	goto l11B6;
}

// 123A: Register Eq_n fn123A(Register Eq_n r0, Register Eq_n r1, Register out Eq_n r2Out, Register out Eq_n r3Out)
// Called from:
//      fn053A
//      fn125E
Eq_n fn123A(Eq_n r0, Eq_n r1, union Eq_n & r2Out, union Eq_n & r3Out)
{
	if (r0 <= 0x00)
	{
		r0 = -r0;
		if (r1 <= 0x00)
		{
			r1 = -r1;
l1246:
			ui32 r2_r3_n;
			fn114A(r0, r1, out r2_r3_n);
			Eq_n r2_n;
			r2_n.u0 = <invalid>;
			r2Out = r2_n;
			Eq_n r3_n;
			r3_n.u0 = <invalid>;
			r3Out = r3_n;
			return r0;
		}
	}
	else
	{
		if (r1 > 0x00)
			goto l1246;
		r1 = -r1;
	}
	Eq_n r2_n;
	r2_n.u0 = <invalid>;
	ui32 r2_r3_n;
	r2Out = -((word16) r2_n + (word16) fn114A(r0, r1, out r2_r3_n));
	Eq_n r3_n;
	r3_n.u0 = <invalid>;
	r3Out = -r3_n;
	return r0;
}

// 125E: Register Eq_n fn125E(Register Eq_n r0, Register Eq_n r1, Register out Eq_n r2Out)
// Called from:
//      fn02C8
//      fn0300
//      fn0E98
Eq_n fn125E(Eq_n r0, Eq_n r1, union Eq_n & r2Out)
{
	cui16 r3_n;
	Eq_n r2_n;
	Eq_n r0_n = fn123A(r0, r1, out r2_n, out r3_n);
	r2Out = __rcl<word16,byte>(__rcl<word16,byte>(r2_n, 0x01, (bool) cond(r3_n << 1)), 0x01, (bool) cond(r3_n << 2));
	return r0_n;
}

// 126C: Register Eq_n fn126C(Register Eq_n r0, Register Eq_n r2, Register Eq_n r3, Register out Eq_n r3Out)
// Called from:
//      fn0300
//      fn0488
//      fn053A
//      fn0A0A
//      fn0F04
//      fn1578
//      fn15F2
Eq_n fn126C(Eq_n r0, Eq_n r2, Eq_n r3, union Eq_n & r3Out)
{
	Eq_n r2_n = __rcl<word16,byte>(r2, 0x01, (bool) cond(r3 << 1)) - r0;
	Eq_n r2_n;
	ui16 r3_n;
	ui32 r2_r3_n;
	ui16 r3_n;
	Eq_n r2_n;
	ui32 r2_r3_n;
	if (r2_n <= 0x00)
	{
		r2_n = __rcl<word16,byte>(r2_n, 0x01, (bool) cond(r3 << 2)) + r0;
		r3_n = r3 << 2;
		r2_r3_n = SEQ(r2_n, r3 << 2);
		if (r2_n <= 0x00)
		{
l127C:
			ui32 v44_n = r2_r3_n << 0x01;
			r3_n = (word16) v44_n;
			r2_n = (word16) r0 + SLICE(v44_n, word16, 16);
			r2_r3_n = SEQ(r2_n, r3_n);
			ui16 r3_n;
			Eq_n r2_n;
			ui32 r2_r3_n;
			if (r2_n <= 0x00)
			{
l1284:
				ui32 v47_n = r2_r3_n << 0x01;
				r3_n = (word16) v47_n;
				r2_n = (word16) r0 + SLICE(v47_n, word16, 16);
				r2_r3_n = SEQ(r2_n, r3_n);
				ui16 r3_n;
				Eq_n r2_n;
				ui32 r2_r3_n;
				if (r2_n <= 0x00)
				{
l128C:
					ui32 v50_n = r2_r3_n << 0x01;
					r3_n = (word16) v50_n;
					r2_n = (word16) r0 + SLICE(v50_n, word16, 16);
					r2_r3_n = SEQ(r2_n, r3_n);
					ui16 r3_n;
					Eq_n r2_n;
					ui32 r2_r3_n;
					if (r2_n <= 0x00)
					{
l1294:
						ui32 v53_n = r2_r3_n << 0x01;
						r3_n = (word16) v53_n;
						r2_n = (word16) r0 + SLICE(v53_n, word16, 16);
						r2_r3_n = SEQ(r2_n, r3_n);
						ui16 r3_n;
						Eq_n r2_n;
						ui32 r2_r3_n;
						if (r2_n <= 0x00)
						{
l129C:
							ui32 v56_n = r2_r3_n << 0x01;
							r3_n = (word16) v56_n;
							r2_n = (word16) r0 + SLICE(v56_n, word16, 16);
							r2_r3_n = SEQ(r2_n, r3_n);
							ui16 r3_n;
							Eq_n r2_n;
							ui32 r2_r3_n;
							if (r2_n <= 0x00)
							{
l12A4:
								ui32 v59_n = r2_r3_n << 0x01;
								r3_n = (word16) v59_n;
								r2_n = (word16) r0 + SLICE(v59_n, word16, 16);
								r2_r3_n = SEQ(r2_n, r3_n);
								ui16 r3_n;
								Eq_n r2_n;
								ui32 r2_r3_n;
								if (r2_n <= 0x00)
								{
l12AC:
									ui32 v62_n = r2_r3_n << 0x01;
									r3_n = (word16) v62_n;
									r2_n = (word16) r0 + SLICE(v62_n, word16, 16);
									r2_r3_n = SEQ(r2_n, r3_n);
									ui16 r3_n;
									Eq_n r2_n;
									ui32 r2_r3_n;
									if (r2_n <= 0x00)
									{
l12B4:
										ui32 v65_n = r2_r3_n << 0x01;
										r3_n = (word16) v65_n;
										r2_n = (word16) r0 + SLICE(v65_n, word16, 16);
										r2_r3_n = SEQ(r2_n, r3_n);
										ui16 r3_n;
										Eq_n r2_n;
										ui32 r2_r3_n;
										if (r2_n <= 0x00)
										{
l12BC:
											ui32 v68_n = r2_r3_n << 0x01;
											r3_n = (word16) v68_n;
											r2_n = (word16) r0 + SLICE(v68_n, word16, 16);
											r2_r3_n = SEQ(r2_n, r3_n);
											ui16 r3_n;
											Eq_n r2_n;
											ui32 r2_r3_n;
											if (r2_n <= 0x00)
											{
l12C4:
												ui32 v71_n = r2_r3_n << 0x01;
												r3_n = (word16) v71_n;
												r2_n = (word16) r0 + SLICE(v71_n, word16, 16);
												r2_r3_n = SEQ(r2_n, r3_n);
												ui16 r3_n;
												Eq_n r2_n;
												ui32 r2_r3_n;
												if (r2_n <= 0x00)
												{
l12CC:
													ui32 v74_n = r2_r3_n << 0x01;
													r3_n = (word16) v74_n;
													r2_n = (word16) r0 + SLICE(v74_n, word16, 16);
													r2_r3_n = SEQ(r2_n, r3_n);
													ui16 r3_n;
													Eq_n r2_n;
													ui32 r2_r3_n;
													if (r2_n <= 0x00)
													{
l12D4:
														ui32 v77_n = r2_r3_n << 0x01;
														r3_n = (word16) v77_n;
														r2_n = (word16) r0 + SLICE(v77_n, word16, 16);
														r2_r3_n = SEQ(r2_n, r3_n);
														ui16 r3_n;
														Eq_n r2_n;
														ui32 r2_r3_n;
														if (r2_n <= 0x00)
														{
l12DC:
															ui32 v80_n = r2_r3_n << 0x01;
															r3_n = (word16) v80_n;
															r2_n = (word16) r0 + SLICE(v80_n, word16, 16);
															r2_r3_n = SEQ(r2_n, r3_n);
															Eq_n r3_n;
															Eq_n r2_n;
															if (r2_n <= 0x00)
															{
l12E4:
																ui32 v83_n = r2_r3_n << 0x01;
																r3_n = (word16) v83_n;
																r2_n = (word16) r0 + SLICE(v83_n, word16, 16);
																if (r2_n <= 0x00)
																{
l12EC:
																	r3Out = r3_n;
																	return r2_n + r0;
																}
l1386:
																Eq_n r3_n = (word16) r3_n + 1;
																r3Out = r3_n;
																return r2_n;
															}
l137C:
															ui16 r3_n = r3_n + 0x01;
															r3_n = r3_n << 1;
															r2_n = __rcl<word16,byte>(r2_n, 0x01, (bool) cond(r3_n << 1)) - r0;
															if (r2_n < 0x00)
																goto l12EC;
															goto l1386;
														}
l1372:
														ui16 r3_n = r3_n + 0x01;
														r2_n = __rcl<word16,byte>(r2_n, 0x01, (bool) cond(r3_n << 1)) - r0;
														r3_n = r3_n << 1;
														r2_r3_n = SEQ(r2_n, r3_n << 1);
														if (r2_n < 0x00)
															goto l12E4;
														goto l137C;
													}
l1368:
													ui16 r3_n = r3_n + 0x01;
													r2_n = __rcl<word16,byte>(r2_n, 0x01, (bool) cond(r3_n << 1)) - r0;
													r3_n = r3_n << 1;
													r2_r3_n = SEQ(r2_n, r3_n << 1);
													if (r2_n < 0x00)
														goto l12DC;
													goto l1372;
												}
l135E:
												ui16 r3_n = r3_n + 0x01;
												r2_n = __rcl<word16,byte>(r2_n, 0x01, (bool) cond(r3_n << 1)) - r0;
												r3_n = r3_n << 1;
												r2_r3_n = SEQ(r2_n, r3_n << 1);
												if (r2_n < 0x00)
													goto l12D4;
												goto l1368;
											}
l1354:
											ui16 r3_n = r3_n + 0x01;
											r2_n = __rcl<word16,byte>(r2_n, 0x01, (bool) cond(r3_n << 1)) - r0;
											r3_n = r3_n << 1;
											r2_r3_n = SEQ(r2_n, r3_n << 1);
											if (r2_n < 0x00)
												goto l12CC;
											goto l135E;
										}
l134A:
										ui16 r3_n = r3_n + 0x01;
										r2_n = __rcl<word16,byte>(r2_n, 0x01, (bool) cond(r3_n << 1)) - r0;
										r3_n = r3_n << 1;
										r2_r3_n = SEQ(r2_n, r3_n << 1);
										if (r2_n < 0x00)
											goto l12C4;
										goto l1354;
									}
l1340:
									ui16 r3_n = r3_n + 0x01;
									r2_n = __rcl<word16,byte>(r2_n, 0x01, (bool) cond(r3_n << 1)) - r0;
									r3_n = r3_n << 1;
									r2_r3_n = SEQ(r2_n, r3_n << 1);
									if (r2_n < 0x00)
										goto l12BC;
									goto l134A;
								}
l1336:
								ui16 r3_n = r3_n + 0x01;
								r2_n = __rcl<word16,byte>(r2_n, 0x01, (bool) cond(r3_n << 1)) - r0;
								r3_n = r3_n << 1;
								r2_r3_n = SEQ(r2_n, r3_n << 1);
								if (r2_n < 0x00)
									goto l12B4;
								goto l1340;
							}
l132C:
							ui16 r3_n = r3_n + 0x01;
							r2_n = __rcl<word16,byte>(r2_n, 0x01, (bool) cond(r3_n << 1)) - r0;
							r3_n = r3_n << 1;
							r2_r3_n = SEQ(r2_n, r3_n << 1);
							if (r2_n < 0x00)
								goto l12AC;
							goto l1336;
						}
l1322:
						ui16 r3_n = r3_n + 0x01;
						r2_n = __rcl<word16,byte>(r2_n, 0x01, (bool) cond(r3_n << 1)) - r0;
						r3_n = r3_n << 1;
						r2_r3_n = SEQ(r2_n, r3_n << 1);
						if (r2_n < 0x00)
							goto l12A4;
						goto l132C;
					}
l1318:
					ui16 r3_n = r3_n + 0x01;
					r2_n = __rcl<word16,byte>(r2_n, 0x01, (bool) cond(r3_n << 1)) - r0;
					r3_n = r3_n << 1;
					r2_r3_n = SEQ(r2_n, r3_n << 1);
					if (r2_n < 0x00)
						goto l129C;
					goto l1322;
				}
l130E:
				ui16 r3_n = r3_n + 0x01;
				r2_n = __rcl<word16,byte>(r2_n, 0x01, (bool) cond(r3_n << 1)) - r0;
				r3_n = r3_n << 1;
				r2_r3_n = SEQ(r2_n, r3_n << 1);
				if (r2_n < 0x00)
					goto l1294;
				goto l1318;
			}
l1304:
			ui16 r3_n = r3_n + 0x01;
			r2_n = __rcl<word16,byte>(r2_n, 0x01, (bool) cond(r3_n << 1)) - r0;
			r3_n = r3_n << 1;
			r2_r3_n = SEQ(r2_n, r3_n << 1);
			if (r2_n < 0x00)
				goto l128C;
			goto l130E;
		}
	}
	else
	{
		ui16 r3_n = (r3 << 1) + 0x01;
		r2_n = __rcl<word16,byte>(r2_n, 0x01, (bool) cond(r3_n << 1)) - r0;
		r3_n = r3_n << 1;
		r2_r3_n = SEQ(r2_n, r3_n << 1);
		if (r2_n < 0x00)
			goto l127C;
	}
	ui16 r3_n = r3_n + 0x01;
	r2_n = __rcl<word16,byte>(r2_n, 0x01, (bool) cond(r3_n << 1)) - r0;
	r3_n = r3_n << 1;
	r2_r3_n = SEQ(r2_n, r3_n << 1);
	if (r2_n < 0x00)
		goto l1284;
	goto l1304;
}

// 13AA: void fn13AA(Stack Eq_n ptrArg00)
// Called from:
//      fn0856
//      fn0B06
//      fn0E32
//      fn34E0
void fn13AA(Eq_n ptrArg00)
{
	g_w25C0 = 0xF700;
	ci16 r0_n = *ptrArg00.u1;
	cu16 r1_n = g_w0070;
	ci16 r0_n = r0_n;
	if (r0_n <= 0x00)
		r0_n = -r0_n;
	do
	{
		r1_n += 0x3C;
		--r0_n;
	} while (r0_n > 0x00);
	do
	{
		__wait();
		fn1578();
	} while (r1_n > g_w0070);
	if (r0_n < 0x00)
		return;
	__reset();
	word16 * r0_n = g_a182A;
	ci16 r1_n;
	for (r1_n = 500; r1_n > 0x00; --r1_n)
	{
		*r0_n = 0xF700;
		word16 * r0_n = r0_n + 1;
		*r0_n = 0x00;
		r0_n = r0_n + 1;
	}
	word16 * r0_n = g_a34E0;
	ci16 r1_n;
	for (r1_n = 711; r1_n > 0x00; --r1_n)
	{
		*r0_n = 0xF700;
		word16 * r0_n = r0_n + 1;
		*r0_n = 0x00;
		r0_n = r0_n + 1;
	}
	*(word16 *) ~0x01 = 0x00;
	word16 * r0_n = g_a013E;
	while (true)
	{
		word16 * v24_n = *r0_n;
		word16 * r0_n = r0_n + 1;
		if (v24_n == null)
			break;
		*v24_n = *r0_n;
		r0_n = r0_n + 1;
	}
	while (true)
		fn0128();
}

// 1578: void fn1578()
// Called from:
//      fn053A
//      fn0856
//      fn0C76
//      fn13AA
void fn1578()
{
	struct Eq_n * r4_n = null;
	while (true)
	{
		struct Eq_n * r5_n = (struct Eq_n *) r4_n[2886];
		if (r5_n == null)
			break;
		*((word16) r4_n[0x0B4B] + 18) = (struct Eq_n) ((char *) r5_n + 0x0A);
		Eq_n r3_n;
		r3_n.u0 = r5_n->ptrFFFC->u0;
		Eq_n r0_n;
		r0_n.u0 = r5_n->tFFFE.u0;
		if (r0_n != 0x00)
		{
			if (r3_n <= 0x00)
				r3_n = -r3_n;
			fn126C(r0_n, 0x00, r3_n, out r3_n);
			if (r5_n->ptrFFFC->u0 <= 0x00)
				r3_n = -r3_n;
		}
		fn1674(r3_n, (word16) r4_n[0x0B4B] + 0x0A);
		++r4_n;
	}
	if (g_t0060.u0 != g_t0062.u0)
	{
		Eq_n r0_n;
		r0_n.u0 = g_t0060.u0;
		g_t0062.u0 = (wchar_t) r0_n;
		fn1674(r0_n, &g_t25B8);
	}
}

// 15F2: Register (ptr16 Eq_n) fn15F2(Register Eq_n r0, Register (ptr16 Eq_n) r1)
// Called from:
//      fn1674
struct Eq_n * fn15F2(Eq_n r0, struct Eq_n * r1)
{
	r1->b0000 = 0x20;
	ptr16 ptrLoc02_n;
	if (r0 < 10000)
	{
		r1->b0001 = 0x20;
		ptrLoc02_n = 0x00;
	}
	else
	{
		r1->b0001 = 0x30;
		ptrLoc02_n = 0x163C;
		for (; r0 >= 10000; r0 -= 10000)
			++r1->b0001;
	}
	Eq_n r2_n;
	Eq_n r3_n;
	if (r0 >= 100)
	{
		cui16 r3_n;
		r2_n = fn126C(100, 0x00, r0, out r3_n);
		r3_n = (r3_n << 1) + 10260;
	}
	else
	{
		r2_n = r0;
		r3_n.u0 = 10260;
	}
	Eq_n r3_n;
	word16 r3_n;
	Eq_n r3_n;
	word16 r3_n;
	return fn1658(fn1658(fn1658(fn1658(&r1->b0001 + 1, r3_n, ptrLoc02_n, out r3_n), r3_n, ptrLoc02_n, out r3_n), (r2_n << 1) + 10260, ptrLoc02_n, out r3_n), r3_n, 0x1630, out r3_n);
}

// 1658: Register (ptr16 Eq_n) fn1658(Register (ptr16 Eq_n) r1, Register Eq_n r3, Stack ptr16 wArg02, Register out ptr16 r3Out)
// Called from:
//      fn15F2
struct Eq_n * fn1658(struct Eq_n * r1, Eq_n r3, ptr16 wArg02, ptr16 & r3Out)
{
	if (wArg02 != 0x00 || *r3.u1 != 0x30)
	{
		r1->b0000 = *r3.u1;
		return;
	}
	else
	{
		r1->b0000 = 0x20;
		return;
	}
}

// 1674: void fn1674(Register Eq_n r0, Register (ptr16 Eq_n) r1)
// Called from:
//      fn1578
void fn1674(Eq_n r0, struct Eq_n * r1)
{
	if (r0 > 0x00)
		fn15F2(r0, r1);
	else
	{
		byte * r0_n = fn15F2(-r0, r1);
		do
			--r0_n;
		while (*r0_n != 0x20);
		*r0_n = 0x2D;
	}
}

struct Eq_n * g_a168C[] = // 168C
	{
	};
struct Eq_n * g_a1696[] = // 1696
	{
	};
word16 g_a182A[] = // 182A
	{
	};
word16 g_w182C = 0x00; // 182C
word16 g_w182E = 0x00; // 182E
Eq_n g_t1F96 = // 1F96
	{
		0x00,
		0x00,
		0,
	};
word16 g_w25AA = 0x00; // 25AA
Eq_n g_t25B8 = // 25B8
	{
		0x20,
		0x20,
	};
word16 g_w25C0 = 0xF700; // 25C0
word16 g_w2610 = 0x00; // 2610
word16 g_w2612 = 0x00; // 2612
word16 g_w267A = 0x00; // 267A
word16 g_w267C = 0x00; // 267C
cui16 g_w27A8 = 0x00; // 27A8
Eq_n g_a27B0[] = // 27B0
	{
	};
ci16 g_w28F0 = 0x030C; // 28F0
word16 g_a28F2[] = // 28F2
	{
	};
Eq_n g_a28F8[] = // 28F8
	{
	};
Eq_n g_a31DC[] = // 31DC
	{
	};
word16 g_w34B4 = 0x00; // 34B4
word16 g_w34B6 = 0x00; // 34B6
word16 g_w34BA = 0x00; // 34BA
word16 g_w34C2 = 0x00; // 34C2
word16 g_w34CA = 0x00; // 34CA
word16 g_w34D2 = 0x00; // 34D2
word16 g_w34DA = 0x00; // 34DA
// 34E0: void fn34E0()
void fn34E0()
{
	__reset();
	__reset();
	__reset();
	__reset();
	__reset();
	*(word16 *) ~0x01 = 0x00;
	g_w0004 = 13638;
	g_w0006 = 0x00;
	*(word16 *) ~0x0471 = 0x00;
	fn355A();
	*(word16 *) ~0x0471 = 131;
	fn355A();
	*(word16 *) ~0x0471 = 131;
	fn355A();
	*(word16 *) ~0x0471 = 0x4B;
	fn355A();
	*(word16 *) ~0x0471 = 0x2F;
	fn355A();
	*(word16 *) ~0x0471 = 0x46;
	fn355A();
	*(word16 *) ~0x0471 = 0x0D;
	fn355A();
	*(word16 *) ~0x99 = 0x40;
	*(word16 *) 0xF400 = 13666;
	fn13AA(*(union Eq_n *) 0x3FFC);
}

// 355A: void fn355A()
// Called from:
//      fn34E0
void fn355A()
{
	while (*(ci8 *) 64396 > 0x00)
		;
}

cui16 g_w35CA = 17221; // 35CA
word16 g_w35CC = 0x5541; // 35CC
word16 g_w35CE = 17747; // 35CE
word16 g_w35D0 = 0x4F20; // 35D0
word16 g_w35D2 = 8262; // 35D2
