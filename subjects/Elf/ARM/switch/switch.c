// switch.c
// Generated by decompiling switch
// using Reko decompiler version 0.8.0.0.

#include "switch.h"

// 000082F0: Register word32 _init(Register out ptr32 r10Out)
word32 _init(ptr32 & r10Out)
{
	word32 r10_5;
	*r10Out = call_gmon_start();
	frame_dummy();
	word32 r4_6;
	__do_global_ctors_aux(out r4_6);
	return r4_6;
}

// 00008314: Register word32 abort()
word32 abort()
{
	<anonymous> ** ip_4 = 0x8320 + globals->dw8320;
	word32 sp_5;
	word32 ip_6;
	word32 pc_7;
	(*ip_4)();
	return ip_6;
}

// 00008324: void __libc_start_main()
void __libc_start_main()
{
	<anonymous> ** ip_4 = 0x8330 + globals->dw8330;
	word32 sp_5;
	word32 ip_6;
	word32 pc_7;
	(*ip_4)();
}

// 00008334: void _start(Register word32 r4, Register word32 r5, Register word32 r6, Register word32 r8, Stack word32 dwArg00)
void _start(word32 r4, word32 r5, word32 r6, word32 r8, word32 dwArg00)
{
	uint16 * r0_14 = globals->ptr8364;
	__libc_start_main();
	abort();
	if (!Z)
		*r0_14 = (uint16) r8;
	if (Z)
		call_gmon_start();
	else
		call_gmon_start();
}

// 0000836C: Register word32 call_gmon_start()
word32 call_gmon_start()
{
	<anonymous> ** r10_10 = 0x8380 + globals->dw8394;
	<anonymous> * r3_11 = *r10_10;
	if (r3_11 == null)
		return r10;
	word32 sp_23;
	word32 r10_24;
	word32 lr_25;
	word32 r3_26;
	byte NZCV_27;
	byte Z_28;
	r3_11();
	return r10_24;
}

// 0000839C: void __do_global_dtors_aux()
void __do_global_dtors_aux()
{
	byte * r5_10 = globals->ptr83F4;
	if ((word32) *r5_10 != 0x00)
		return;
	<anonymous> *** r4_28 = globals->ptr83F8;
	<anonymous> * r2_30 = **r4_28;
	if (r2_30 == null)
		*r5_10 = 0x01;
	else
	{
		*r4_28 = (<anonymous> ***) ((char *) *r4_28 + 0x04);
		word32 sp_37;
		word32 r4_38;
		word32 r5_39;
		word32 lr_40;
		word32 pc_41;
		word32 r3_42;
		byte NZCV_43;
		byte Z_44;
		word32 r2_45;
		r2_30();
	}
}

// 000083FC: void call___do_global_dtors_aux()
void call___do_global_dtors_aux()
{
}

// 00008404: void frame_dummy()
void frame_dummy()
{
	word32 * r0_3 = globals->ptr8424;
	if (*r0_3 == 0x00)
		return;
	word32 r3_14 = globals->dw8428;
	if (r3_14 == 0x00)
		return;
	word32 sp_17;
	word32 r0_18;
	word32 pc_19;
	word32 r3_20;
	byte NZCV_21;
	byte Z_22;
	fn00000000();
}

// 0000842C: void call_frame_dummy()
void call_frame_dummy()
{
}

// 00008434: Register Eq_161 frobulate(Register Eq_161 r0, Stack Eq_161 dwArg00, Register out ptr32 fpOut)
Eq_161 frobulate(Eq_161 r0, Eq_161 dwArg00, ptr32 & fpOut)
{
	word32 fp_25;
	*fpOut = dwArg00;
	return __divsi3(r0 * r0, 1337);
}

// 00008470: Register word32 bazulate(Register Eq_161 r0, Register Eq_161 r1)
word32 bazulate(Eq_161 r0, Eq_161 r1)
{
	struct Eq_176 * fp_23;
	word32 r0_28 = __divsi3(r0 + r1, frobulate(r0, r1, out fp_23));
	word32 * fp_32;
	__divsi3(r0_28, frobulate(fp_23->tFFFFFFE8, r1, out fp_32));
	return *fp_32;
}

// 000084D4: Register word32 switcheroo(Register Eq_161 r0)
word32 switcheroo(Eq_161 r0)
{
	ptr32 fp_19;
	switch (r0)
	{
	case 0x00:
	case 0x01:
		goto l00008540;
	case 0x02:
	case 0x03:
	case 0x04:
		frobulate(r0, r0, out fp_19);
		break;
	case 0x05:
	case 0x07:
l00008540:
		fp_19 = bazulate(0x00, 0x00);
		break;
	case 0x06:
		frobulate(r0 - 0x03, r0, out fp_19);
		break;
	case 0x08:
		bazulate(r0, r0);
		goto l00008540;
	}
	return *(fp_19 - -0x04);
}

// 0000855C: void main(Register Eq_161 r0)
void main(Eq_161 r0)
{
	switcheroo(r0);
}

// 00008588: Register Eq_161 __divsi3(Register Eq_161 r0, Register Eq_161 r1)
Eq_161 __divsi3(Eq_161 r0, Eq_161 r1)
{
	Eq_161 r1_107;
	int32 ip_4 = r0 ^ r1;
	uint32 r3_106 = 0x01;
	Eq_161 r2_100 = 0x00;
	r1_107 = r1;
	if (r1 < 0x00)
		r1_107 = 0x00 - r1;
	if (r1 == 0x00)
	{
		__div0(r0);
		return 0x00;
	}
	else
	{
		if (r0 < 0x00)
			r0 = 0x00 - r0;
		if (r0 >= r1_107)
		{
			do
			{
				Eq_251 C_117 = cond(r1_107 - 0x10000000);
				if (r1_107 < 0x10000000)
					C_117 = cond(r1_107 - r0);
				if (!C_117)
					r1_107 = r1_107 << 0x04;
				if (!C_117)
					r3_106 = r3_106 << 0x04;
			} while (C_117);
			do
			{
				Eq_264 C_111 = cond(r1_107 - 0x80000000);
				if (r1_107 < 0x80000000)
					C_111 = cond(r1_107 - r0);
				if (!C_111)
					r1_107 = r1_107 << 0x01;
				if (!C_111)
					r3_106 = r3_106 << 0x01;
			} while (C_111);
			do
			{
				Eq_161 r0_105;
				r0_105 = r0;
				if (r0 >= r1_107)
					r0_105 = r0 - r1_107;
				if (r0 >= r1_107)
					r2_100 = r2_100 | r3_106;
				Eq_161 r0_103;
				r0_103 = r0_105;
				if (r0_105 >= r1_107 >> 0x01)
					r0_103 = r0_105 - (r1_107 >> 0x01);
				if (r0_105 >= r1_107 >> 0x01)
					r2_100 = r2_100 | r3_106 >> 0x01;
				Eq_161 r0_101;
				r0_101 = r0_103;
				if (r0_103 >= r1_107 >> 0x02)
					r0_101 = r0_103 - (r1_107 >> 0x02);
				if (r0_103 >= r1_107 >> 0x02)
					r2_100 = r2_100 | r3_106 >> 0x02;
				r0 = r0_101;
				if (r0_101 >= r1_107 >> 0x03)
					r0 = r0_101 - (r1_107 >> 0x03);
				if (r0_101 >= r1_107 >> 0x03)
					r2_100 = r2_100 | r3_106 >> 0x03;
				if (r0 != 0x00)
					r3_106 = r3_106 >> 0x04;
				if (r0 != 0x00)
					r1_107 = r1_107 >> 0x04;
			} while (r0 != 0x00);
		}
		Eq_161 r0_32 = r2_100;
		if (ip_4 < 0x00)
			r0_32 = 0x00 - r2_100;
		return r0_32;
	}
}

// 00008638: void __div0(Register Eq_161 r0)
void __div0(Eq_161 r0)
{
	__syscall(0x00900014);
	if (r0 >= 1000)
		return;
	__syscall(0x00900025);
}

// 00008654: void __libc_csu_init()
void __libc_csu_init()
{
	<anonymous> *** r10_17;
	Eq_334 r4_18 = _init(out r10_17);
	<anonymous> ** r1_21 = *r10_17;
	int32 r3_23 = *r10_17 - r1_21;
	if (r4_18 >= r3_23 >> 0x02)
		return;
	word32 sp_47;
	word32 r4_48;
	word32 r5_49;
	word32 r6_50;
	word32 r10_51;
	word32 lr_52;
	word32 pc_53;
	word32 r3_54;
	word32 r2_55;
	word32 r1_56;
	byte NZCV_57;
	byte C_58;
	(*r1_21)();
}

// 000086B0: void __libc_csu_fini()
void __libc_csu_fini()
{
	<anonymous> *** r10_15 = 0x86C8 + globals->dw8700;
	<anonymous> ** r1_16 = *r10_15;
	int32 r3_18 = *r10_15 - r1_16;
	if (r3_18 >> 0x02 == 0x00)
		_fini();
	else
	{
		word32 sp_37;
		word32 r4_38;
		word32 r5_39;
		word32 r10_40;
		word32 lr_41;
		word32 pc_42;
		word32 r3_43;
		word32 r2_44;
		word32 r1_45;
		byte NZCV_46;
		byte Z_47;
		(*r1_16)();
	}
}

// 0000870C: Register ptr32 __do_global_ctors_aux(Register out ptr32 r4Out)
ptr32 __do_global_ctors_aux(ptr32 & r4Out)
{
	<anonymous> * r2_9 = globals->ptr8740->ptrFFFFFFFC;
	if (r2_9 != (<anonymous> *) 0x01)
	{
		ptr32 sp_27;
		word32 r4_28;
		word32 lr_29;
		word32 r3_30;
		word32 pc_31;
		word32 r2_32;
		byte NZCV_33;
		byte Z_34;
		r2_9();
		return sp_27;
	}
	else
	{
		word32 r4_22;
		*r4Out = r4;
		return fp;
	}
}

// 00008744: void call___do_global_ctors_aux()
void call___do_global_ctors_aux()
{
}

// 0000874C: void _fini()
void _fini()
{
	__do_global_dtors_aux();
}

